{% extends 'base.html' %} {% block title %}Cadastrar{% endblock %}
////////////////////////////////////////////////////////////////////////////////////////
{% block content %}
<div class="container container-600px mt-5">
  <h2 class="mb-4">Cadastrar</h2>

  <form method="post" class="needs-validation" novalidate>
    {% csrf_token %}

    <div class="mb-3">
      <label for="{{ form.username.id_for_label }}" class="form-label"
        >Nome de usuário</label
      >
      {{ form.username }} {% if form.username.errors %}
      <div class="text-danger">{{ form.username.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="{{ form.email.id_for_label }}" class="form-label"
        >Endereço de E-mail</label
      >
      {{ form.email }} {% if form.email.errors %}
      <div class="text-danger">{{ form.email.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="{{ form.password1.id_for_label }}" class="form-label"
        >Senha</label
      >
      {{ form.password1 }} {% if form.password1.errors %}
      <div class="text-danger">{{ form.password1.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="{{ form.password2.id_for_label }}" class="form-label"
        >Confirme a Senha</label
      >
      {{ form.password2 }} {% if form.password2.errors %}
      <div class="text-danger">{{ form.password2.errors }}</div>
      {% endif %}
    </div>

    <button type="submit" class="btn btn-primary btn-block">Cadastrar</button>
  </form>

  <p class="mt-3 text-center">
    Já tem uma conta? <a href="{% url 'login' %}">Faça login aqui</a>.
  </p>
</div>

{% endblock %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    form.addEventListener("submit", function (event) {
      const password = form.password.value;
      const confirmPassword = form.confirm_password.value;

      if (password.length < 8) {
        alert("A senha deve ter pelo menos 8 caracteres.");
        event.preventDefault();
      }

      if (password !== confirmPassword) {
        alert("As senhas não coincidem.");
        event.preventDefault();
      }
    });
  });
</script>
